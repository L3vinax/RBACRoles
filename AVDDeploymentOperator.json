{
  "properties": {
    "roleName": "AVD Deployment Operator",
    "description": "Least-privilege role to deploy and manage Azure Virtual Desktop control-plane resources and session hosts, and assign users to application groups.",
    "type": "CustomRole",
    "permissions": [
      {
        "actions": [
          "Microsoft.DesktopVirtualization/hostPools/*",
          "Microsoft.DesktopVirtualization/workspaces/*",
          "Microsoft.DesktopVirtualization/applicationGroups/*",

          "Microsoft.Authorization/roleAssignments/read",
          "Microsoft.Authorization/roleAssignments/write",

          "Microsoft.Compute/virtualMachines/*",
          "Microsoft.Compute/disks/*",
          "Microsoft.Compute/availabilitySets/*",

          "Microsoft.Network/networkInterfaces/*",
          "Microsoft.Network/publicIPAddresses/*",
          "Microsoft.Network/virtualNetworks/subnets/read",
          "Microsoft.Network/virtualNetworks/subnets/join/action",
          "Microsoft.Network/virtualNetworks/read",
          "Microsoft.Network/networkSecurityGroups/*",
          "Microsoft.Network/loadBalancers/*",

          "Microsoft.compute/galleries/*",
          "Microsoft.compute/galleryImages/*",
          "Microsoft.compute/galleryApplications/*",

          "Microsoft.KeyVault/vaults/read",
          "Microsoft.KeyVault/vaults/secrets/read",

          "Microsoft.Storage/storageAccounts/read",
          "Microsoft.Storage/storageAccounts/listKeys/action",
          "Microsoft.Storage/storageAccounts/blobServices/containers/*",

          "Microsoft.Resources/subscriptions/resourceGroups/read",
          "Microsoft.Resources/deployments/*",
          "Microsoft.Resources/tags/*",
          "Microsoft.Authorization/roleDefinitions/read"
        ],
        "notActions": [
          "Microsoft.Authorization/roleAssignments/delete"
        ],
        "dataActions": [],
        "notDataActions": []
      }
    ],
    "assignableScopes": [
      "/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<AVD_RESOURCE_GROUP>"
        ]
    }
}
